@page
@model RazorPages.Pages.IndexModel
@{
    ViewData["Title"] = "Inicio";
}
<form method="get" class="mb-3">
    <div class="input-group">
        <input type="text" name="q" class="form-control"
               placeholder="Buscar libro o autor..."
               value="@Model.Query" />
        <button class="btn btn-outline-secondary" type="submit">Buscar</button>
    </div>
</form>

<!-- Categorías -->
<div class="mb-3">
    <strong>Categorías:</strong>
    <a asp-page="/Index" class="btn btn-sm btn-link">Todos</a>
    @foreach (var cat in Model.Categorias)
    {
        <a asp-page="/Index" asp-route-categoria="@cat" asp-route-q="@Model.Query"
           class="btn btn-sm btn-outline-secondary">@cat</a>
    }
</div>

<div class="row">
    @foreach (var libros in Model.Libros)
    {
        <div class="card-body d-flex flex-column"  style="width: 200px;">
        <div class="Imagenes">
            <img src="~/img/@libros.Imagen" alt="@libros.Titulo" class="img-fluid">
        </div>
        <div class="card"></div>
        <h3>@libros.Titulo</h3>
        <p>@libros.Autor</p>
        <p>$@libros.Precio</p>
          <a asp-page="/librodetalle" asp-route-id="@libros.Id" class="btn btn-primary mt-2">Ver más</a>
        </div>
    }
</div>


@if (TempData["Mensaje"] != null)
{
    <div class="alert alert-success">
        @TempData["Mensaje"]
    </div>
}

@foreach (var libros in Model.Libros)
{
    <div>
        <h3>@libros.Titulo</h3>
        <a asp-page="/librodetalle" asp-route-id="@libros.Id">Ver más</a>
        <form method="post" asp-page-handler="AgregarCarrito" asp-route-id="@libros.Id">
            <button type="submit" class="btn btn-success mt-2"> Agregar al carrito</button>
        </form>
    </div>
}

