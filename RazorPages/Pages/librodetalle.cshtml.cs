using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;
using RazorPages.Models;
using System.Text.Json;

namespace RazorPages.Pages
{
    public class librodetalleModel : PageModel
    {
        private readonly ILibroRepository _repo;

        public librodetalleModel(ILibroRepository repo)
        {
            _repo = repo;
        }

        public Libro? Libro { get; set; }

        // üëâ NECESARIO PARA QUE LA P√ÅGINA CARGUE EL LIBRO
        public IActionResult OnGet(int id)
        {
            var libros = ObtenerLibros();
            Libro = libros.FirstOrDefault(l => l.Id == id);

            if (Libro == null)
                return RedirectToPage("/Index");

            return Page();
        }

        // Obtener lista de libros
        private List<Libro> ObtenerLibros()
        {
            return new List<Libro>
            {
                new Libro { Id = 1, Titulo = "Piense y h√°gase rico", Autor = "Napoleon Hill",Anio = 1967, Descripcion = "As√≠ de f√°cil: la riqueza y la realizaci√≥n personal est√°n al alcance de todas aquellas personas que lo desean; basta simplemente con desvelar un secreto, el secreto del √©xito. Esta nueva edici√≥n de este magn√≠fico cl√°sico est√° basada en la versi√≥n original del autor, y ha sido revisada y corregida ampliamente. Andrew Carnegie, Henry Ford, Theodore Roosevelt, Thomas Edison, Alexander Graham Bell y John D. Rockefeller, entre otros, son algunos de los entrevistados por Napoleon Hill para poder entender las entra√±as de su √©xito. Cualquiera que ponga en pr√°ctica sus principios y su filosof√≠a, sin duda obtendr√° todo aquello que desee en la vida.", Precio = 3500, Imagen = "so.jpg"},
                new Libro { Id = 2, Titulo = "El intercambio", Autor = "Jonh ", Anio = 1605, Descripcion = "Diez d√≠as para salvar una vida. Un segundo para ponerle fin. Hace quince a√±os, Mitch McDeere esquiv√≥ a la muerte. Y a la mafia. Tras hacerse con diez millones de d√≥lares y desaparecer, vio c√≥mo sus enemigos acababan en la c√°rcel o en la tumba. Ahora Mitch y su mujer, Abby, viven en Manhattan, donde √©l se ha abierto camino hasta convertirse en socio del bufete m√°s importante del mundo. Pero cuando su mentor en Roma le pide un favor que le llevar√° a Estambul y Tr√≠poli, Mitch se ve inmerso en el centro de un siniestro complot con ramificaciones por todo el planeta y que una vez m√°s pondr√° en peligro a sus colegas, amigos y familia. Mitch se ha convertido en un experto en mantenerse un paso por delante de sus adversarios, pero ahora que el tiempo se est√° agotando, ¬øser√° capaz de volver a lograrlo? Esta vez, no hay donde esconderse. Sobre la novela han dicho‚Ä¶ ¬´La secuela m√°s ansiosamente esperada de la √∫ltima d√©cada¬ª. Daily Express ¬´Una actualizaci√≥n vertiginosa‚Ä¶ Grisham, en su versi√≥n m√°s cl√°sica, intensifica el suspense¬ª. The Wall Street Journal ¬´Una trama maravillosamente construida‚Ä¶ Deja sin aliento al lector¬ª. Daily Mail ¬´En esta novela Grisham nos regala la clase de narraci√≥n hipn√≥tica que siempre esperamos de √©l¬ª. Financial Times ¬´Fascinante¬ª. Irish Independent ¬´Los fans de Grisham lo van a devorar‚Ä¶ La trama y el ritmo son fren√©ticos¬ª. Independente", Precio = 2800, Imagen = "Elintercambio.jpg"},
                new Libro { Id = 3, Titulo = "El arte de ser nosotros", Imagen = "Elarte.png", Autor = "Walter Riso", Anio = 2018, Descripcion = "El arte de ser nosotros es una gu√≠a pr√°ctica para aprender a amarnos a nosotros mismos y a vivir en armon√≠a con los dem√°s. Walter Riso nos ofrece herramientas y consejos para superar la dependencia emocional, fortalecer nuestra autoestima y construir relaciones saludables. A trav√©s de ejemplos y ejercicios, el autor nos invita a reflexionar sobre nuestras creencias y patrones de comportamiento, y nos anima a tomar el control de nuestra vida emocional. Este libro es una invitaci√≥n a descubrir el poder del amor propio y a vivir una vida plena y aut√©ntica.", Precio = 3200 },
                new Libro { Id = 4, Titulo = "Los ingenieros del caos" , Autor = "Jordi Borr√†s", Anio = 2020, Descripcion = "Los ingenieros del caos es una investigaci√≥n period√≠stica que revela c√≥mo las redes sociales y las plataformas digitales han sido utilizadas para manipular la opini√≥n p√∫blica y desestabilizar democracias en todo el mundo. Jordi Borr√†s nos lleva a un viaje por los entresijos de la desinformaci√≥n, mostrando c√≥mo grupos organizados y gobiernos autoritarios emplean t√°cticas de propaganda, bots y fake news para influir en elecciones y polarizar sociedades. A trav√©s de entrevistas con expertos y testimonios de v√≠ctimas, el autor expone las amenazas que enfrentamos en la era digital y nos invita a reflexionar sobre la importancia de la alfabetizaci√≥n medi√°tica y la responsabilidad individual en la lucha contra la manipulaci√≥n informativa.", Precio = 3000, Imagen = "1211.jpg"},
                new Libro { Id = 5, Titulo = "Deja de ser tu" , Autor = "Joe Dispenza", Anio = 2017, Descripcion = "Deja de ser t√∫ es un libro que explora la conexi√≥n entre la mente y el cuerpo, y c√≥mo podemos transformar nuestra vida cambiando nuestros pensamientos y emociones. Joe Dispenza nos gu√≠a a trav√©s de un proceso de autoconocimiento y crecimiento personal, ense√±√°ndonos a liberarnos de patrones limitantes y a crear una nueva realidad basada en la intenci√≥n y la conciencia. A trav√©s de ejercicios pr√°cticos y meditaciones, el autor nos invita a descubrir nuestro verdadero potencial y a vivir una vida m√°s plena y satisfactoria.", Precio = 4000, Imagen = "ses.jpg"},
                new Libro { Id = 6, Titulo = "Viaje a el centro de la tierra" , Autor = "Julio Verne", Anio = 1864, Descripcion = "Viaje al centro de la Tierra es una novela de aventuras que narra la expedici√≥n del profesor Otto Lidenbrock, su sobrino Axel y su gu√≠a Hans Belker al interior del planeta. Siguiendo un antiguo manuscrito, los protagonistas descienden a trav√©s de un volc√°n en Islandia y se enfrentan a numerosos desaf√≠os y peligros en su traves√≠a por un mundo subterr√°neo lleno de maravillas naturales, criaturas prehist√≥ricas y fen√≥menos extraordinarios. A lo largo de su viaje, los exploradores deben utilizar su ingenio y valent√≠a para sobrevivir y descubrir los secretos ocultos en las profundidades de la Tierra.", Precio = 2500, Imagen = "tierra.jpg"},
                new Libro { Id = 7, Titulo = "GRAVITY FALLS DIARIO 3" , Autor = "Alex Hirsch", Anio = 2016, Descripcion = "Gravity Falls Diario 3 es un libro que recopila los misterios y secretos del pueblo ficticio de Gravity Falls, tal como se presentan en la serie animada del mismo nombre. Escrito por el creador de la serie, Alex Hirsch, el diario est√° lleno de ilustraciones, notas y pistas que revelan la historia oculta detr√°s de los personajes y eventos de la serie. A trav√©s de sus p√°ginas, los lectores pueden explorar criaturas sobrenaturales, enigmas sin resolver y teor√≠as conspirativas que hacen de Gravity Falls un lugar fascinante y lleno de aventuras.", Precio = 4500, Imagen = "diario.jpg"},
                new Libro { Id = 8, Titulo = "La ni√±a del sombrero azul" , Autor = "Ana Alcolea", Anio = 2020, Descripcion = "La ni√±a del sombrero azul es una novela juvenil que narra la historia de Luc√≠a, una adolescente que descubre un misterioso sombrero azul en el desv√°n de su abuela. A medida que Luc√≠a investiga el origen del sombrero, se ve envuelta en una serie de aventuras que la llevan a descubrir secretos familiares, amistades inesperadas y el valor de la valent√≠a y la perseverancia. A trav√©s de su viaje, Luc√≠a aprende importantes lecciones sobre la identidad, la confianza en uno mismo y la importancia de seguir los propios sue√±os.", Precio = 2700, Imagen = "som.jpg"},
                new Libro { Id = 9, Titulo = "EL HIJO DE NEPTUNO ( LOS HEROES DEL OLIMPO )" , Autor = "Rick Riordan", Anio = 2012, Descripcion = "El hijo de Neptuno es la segunda entrega de la serie Los H√©roes del Olimpo, escrita por Rick Riordan. La historia sigue a Percy Jackson, un semidi√≥s hijo de Poseid√≥n, que se encuentra en un campamento para semidioses romanos sin recuerdos de su pasado. Junto a sus nuevos amigos, Hazel Levesque y Frank Zhang, Percy emprende una peligrosa misi√≥n para salvar al mundo de una amenaza inminente: la resurrecci√≥n de la diosa romana de la muerte, Proserpina. A lo largo de su aventura, los protagonistas enfrentan desaf√≠os √©picos, descubren secretos sobre sus or√≠genes y fortalecen sus lazos de amistad y lealtad.", Precio = 3800, Imagen = "nepa.jpg"},
                new Libro { Id = 10, Titulo = "AMANECER EN LA COSECHA ( LIBRO 5 DE LOS JUEGOS DEL HAMBRE )" , Autor = "Suzanne Collins", Anio = 2020, Descripcion = "Amanecer en la cosecha es el quinto libro de la serie Los Juegos del Hambre, escrita por Suzanne Collins. La historia contin√∫a la saga de Katniss Everdeen, quien ahora debe enfrentarse a las consecuencias de su papel como s√≠mbolo de la rebeli√≥n contra el Capitolio. A medida que la guerra se intensifica, Katniss lucha por proteger a sus seres queridos y encontrar su lugar en un mundo devastado por el conflicto. Con giros inesperados y momentos emotivos, este libro explora temas de sacrificio, esperanza y la lucha por la libertad en medio de la adversidad.", Precio = 5000, Imagen = "juegos.jpg"},
                new Libro { Id = 11, Titulo = "Los gatos de fortuna", Autor = "Anny Duperey", Anio = 2000, Descripcion = "En este relato lleno de sensibilidad, Anny Duperey cuenta c√≥mo los gatos, llegados a su vida casi siempre por azar, se convirtieron en compa√±eros indispensables. Cada uno de ellos marc√≥ un momento importante de su existencia, acompa√±√°ndola en la soledad, en la alegr√≠a o en la superaci√≥n de dificultades. Con ternura y humor, la autora nos ofrece un homenaje a esos ‚Äúgatos de fortuna‚Äù y a la huella que dejan en la vida de quienes los acogen", Precio = 14500, Imagen = "gatoFortuna.jpg" },
                new Libro { Id = 12, Titulo = "El laberinto en llamas (Las pruebas de apolo libro 3)", Autor = "Rick Riordan", Anio =2018 , Descripcion = "Con la ayuda de algunos amigos semidioses, Lester se las ha apa√±ado para sobrevivir a las dos primeras pruebas: una en el Campamento Mestizo y la otra en Indian√°polis, donde Meg recibi√≥ la profec√≠a oscura. Las palabras que pronunci√≥ sentada en el Trono de la Memoria revelaron que un dream team de tres emperadores romanos supervillanos planea atacar el Campamento J√∫piter. Mientras Leo vuela a toda velocidad para alertar el Campamento Romano, Lester y Meg deber√°n cruzar el Laberinto para encontrar al tercer emperador (y a un Or√°culo que habla con juegos de palabras) en alg√∫n punto de suroeste de Am√©rica. Por suerte, hab√≠a un verso en la profec√≠a que les da un poco de esperanza: Solo el gu√≠a ungulado sabe c√≥mo no perderse. Est√° claro que van a tener un s√°tiro que los acompa√±e y Meg sabe exactamente a qui√©n tiene que pedir este favorcito.", Precio = 25600 , Imagen = "laspruebas.png" },
                new Libro { Id = 13, Titulo = "Un reino de promesas malditas", Autor = "Lexi Ryan", Anio = 2022, Descripcion = "Brie har√≠a cualquier cosa antes de hacer un trato con las hadas; la muerte es preferible a sus viles planes. Pero cuando su hermana es secuestrada por el sadico rey de la Corte Unseelie, no hay nada que Brie no har√≠a para poder recuperarla, incluso hacer un trato con el propio rey para robar tres reliquias m√°gicas de la corte rival. Obtener acceso sin restricciones a la Corte Seelie es m√°s f√°cil de decir que de hacer. La √∫nica opci√≥n de Brie es hacerse pasar por una potencial novia para el Principe Ronan, el principe seelie que no es tan malvado como ella pensaba. Reacia a dejar que su coraz√≥n la distraiga, acepta la ayuda de una banda de unseelies marginados con su propia agenda secreta. Pero cuando Brie pasa tiempo con su misterioso lider, Finn, se encuentra luchando para resistir su seductor encanto. Atrapada entre dos peligrosas cortes, Brie debe decidir en quien conf√≠a con su lealtad‚Ä¶ y con su coraz√≥n.", Precio =16300 , Imagen = "mald.jpg" },
                new Libro { Id = 14, Titulo = "La espada de Kuromori", Autor = "Jason Rohan", Anio = 2014, Descripcion = "Un chico llamado Kenny Blackwood llega a Tokio para pasar el verano con su padre. Todo parece indicar que ser√°n unas vacaciones comunes y corrientes. Sin embargo, muy pronto se ve envuelto en una peligrosa e inesperada misi√≥n que pondr√° a prueba su valor e inteligencia. Este joven h√©roe descubre que posee poderes especiales y que a su alrededor hay seres mitol√≥gicos que inciden en los acontecimientos cotidianos. Kenny deber√° encontrar la legendaria Espada de Cielo, la cual le servir√° para salvar su vida y evitar una guerra. Con esta arma enfrentar√° a un conjunto de terror√≠ficas criaturas que no dudar√°n en matarlo si √©l les da la oportunidad. Su √∫nica ayuda ser√° Kiyomi, una sarc√°stica y ruda chica.", Precio = 11800, Imagen = "esp.jpg" },
                new Libro { Id = 15, Titulo = "El veneno del poder", Autor = "Gabriela Cerruti", Anio =2025, Descripcion = "El poder del veneno es un thriller pol√≠tico de Gabriela Cerruti que explora la intimidad del poder en Argentina. Sigue al presidente Salvador G√≥mez, un mandatario d√©bil en medio de una crisis econ√≥mica y un esc√°ndalo personal por su divorcio y nueva relaci√≥n. La trama se desencadena con una muerte sospechosa en su departamento privado, que podr√≠a ser suicidio, accidente o asesinato. La novela, adem√°s de la intriga, ofrece una mirada detallada y realista de los entresijos del poder ‚Äîdesde la Casa Rosada hasta las reuniones pol√≠ticas‚Äî, mostrando sus bajezas y lealtades. La autora, con su experiencia period√≠stica y pol√≠tica, describe con agudeza este mundo desde adentro.", Precio = 28699, Imagen = "veneno.jpg" },
                new Libro { Id = 16, Titulo = "Elon Musk", Autor = "Walter Isaacson", Anio = 2023, Descripcion = "Elon Musk de Walter Isaacson es una biograf√≠a que explora el impacto de los traumas infantiles ‚Äîacoso escolar y abuso paterno‚Äî en la formaci√≥n de la personalidad obsesiva y vol√°til del magnate. Analiza c√≥mo estas experiencias impulsaron sus √©xitos con Tesla y SpaceX, pero tambi√©n sus actitudes impredecibles y la pol√©mica compra de Twitter. Con acceso privilegiado a su vida, el libro cuestiona si los demonios personales de Musk son el precio inevitable de su genio innovador.", Precio = 25899, Imagen = "elon.jpg" },
                new Libro { Id = 17, Titulo = "El crimen de a√±o nuevo", Autor = "Daniel Balmaceda", Anio = 2025, Descripcion = "En 1880, Buenos Aires ya no era aquella Gran Aldea apacible, sacudida apenas por el traqueteo espor√°dico de un tranv√≠a o un carruaje. Una cuarta parte de sus habitantes eran inmigrantes alojados en pensiones, aferrados al sue√±o de un futuro mejor. En el coraz√≥n de ese deslumbrante y desigual escenario urbano, comienza a gestarse una tragedia. En un conventillo del barrio Norte, un crimen quiebra la fr√°gil convivencia de los inquilinos y estremece a la colectividad napolitana. El cuerpo yace en el patio, y a su alrededor se multiplican las conjeturas: ¬øvenganza, celos, ajuste de cuentas, rencor? Todos parecen tener algo que ocultar. Reconstruir lo sucedido ser√° una traves√≠a entre indicios, secretos y giros inesperados. Los personajes son piezas de un rompecabezas que el lector deber√° armar, dudando de cada uno. ¬øQui√©n es la v√≠ctima? ¬øQu√© misterios se ocultan tras las m√°scaras que impone el delito? Rescatada con maestr√≠a por Daniel Balmaceda a partir de documentos olvidados, esta historia real y vertiginosa, narrada con suspenso y puntillosa destreza, desempolva huellas del pasado para retratar una √©poca convulsa, inaugural y profundamente reveladora de la idiosincrasia argentina.", Precio = 32400, Imagen = "hhhh.jpg" },
                new Libro { Id = 18, Titulo = "Alma de gato", Autor = "Ruth Berger", Anio = 2011, Descripcion = "Alma de gato de Ruth Berger es una colecci√≥n de 78 historias que celebran el v√≠nculo √∫nico entre humanos y gatos. A trav√©s de relatos conmovedores, divertidos e inspiradores, el libro captura la esencia de la conexi√≥n felina: desde an√©cdotas cotidianas como gatos que rompen objetos o evaden vacunas, hasta momentos profundos donde estos animales acompa√±an a sus due√±os en superar crisis o enfermedades.Con un tono c√°lido y reflexivo, la autora destaca el amor incondicional, la complicidad y la intuici√≥n de los felinos, mostrando c√≥mo transforman la vida de las personas. Ideal para quienes creen en el alma especial de los gatos y su impacto en nuestras vidas.", Precio = 17299, Imagen = "almaGatoo.png" },
                new Libro { Id = 19, Titulo = "Bajo la misma estrella", Autor = "John Green", Anio = 2012, Descripcion = "Este libro narra la historia de Hazel Grace Lancaster, una adolescente de 16 a√±os que sobrevive gracias a un tratamiento experimental contra el c√°ncer de tiroides, y Augustus Waters, un joven carism√°tico y optimista que perdi√≥ una pierna por osteosarcoma. Ambos se conocen en un grupo de apoyo para pacientes oncol√≥gicos y, a pesar de las circunstancias adversas, inician una relaci√≥n llena de humor, inteligencia y amor profundo. Juntos emprenden un viaje hacia √Åmsterdam para cumplir el deseo de Hazel de conocer a su escritor favorito, enfrent√°ndose a preguntas sobre la vida, la muerte, el legado y el significado de existir.", Precio = 22499, Imagen = "mismaEstrella.jpg" },
                new Libro { Id = 20, Titulo = "Yo antes de ti", Autor = "Jojo Moyes", Anio = 2012, Descripcion = "El libro sigue la vida de Louisa Clark, una joven alegre y exc√©ntrica que pierde su trabajo en una cafeter√≠a y acepta un trabajo como cuidadora de Will Traynor, un hombre exitoso y aventurero que qued√≥ paral√≠tico tras un accidente. A pesar de sus personalidades opuestas y iniciales fricciones, ambos desarrollan una conexi√≥n profunda que transforma sus vidas. Lou se propone mostrar a Will que la vida a√∫n puede valer la pena, pero √©l arrastra una herida emocional que pondr√° a prueba su relaci√≥n y los llevar√° a enfrentarse a decisiones imposibles sobre el amor, la libertad y el derecho a elegir.", Precio = 26699, Imagen = "antesDeTi.jpg" },
                new Libro { Id = 21, Titulo = "ALGUN TIEMPO ATRAS : LA VIDA DE GUSTAVO CERATI", Autor = "MARCHI, SERGIO", Anio = 2023, Descripcion = "La perfecci√≥n es inalcanzable. Sin embargo, Gustavo Cerati la busc√≥ con fuerza y pasi√≥n en su arte. En conexi√≥n con ese esp√≠ritu irreductible, Alg√∫n tiempo atr√°s. La vida de Gustavo Cerati aborda el recorrido vital y creativo del hombre y del artista con la misma conciencia -la de que hay enigmas de imposible resoluci√≥n- pero sin limitarse jam√°s en su afanosa investigaci√≥n. Decidido a recuperar la parte m√°s luminosa de esta figura √∫nica, la de uno de los m√∫sicos argentinos de mayor proyecci√≥n internacional, Sergio Marchi no deja rinc√≥n sin visitar: en procura tanto del compositor e int√©rprete que trascendi√≥ masivamente con Soda Stereo y luego se reinvent√≥ en una extraordinaria carrera solista, como del hijo de una familia trabajadora que -dato que suele olvidarse bajo el prejuicioso mito del ¬´cheto¬ª- lleg√≥ desde el interior del pa√≠s a la Buenos Aires de los 50; del ni√±o travieso, curioso y activo; del adolescente insaciable que conoci√≥ la ebullici√≥n rockera de los 70; de ese muchacho que supo que habr√≠a de hacerse a s√≠ mismo a fuerza de t alento y tambi√©n de trabajo. Del ser enamoradizo que encontr√≥ en las mujeres un manantial inagotable de inspiraci√≥n, mucho amor y no pocos padecimientos; del marido y padre que anhel√≥ ser. Del obrero musical que muy poca gente conoci√≥; que experiment√≥ con el rock, el pop, la electr√≥nica, con la tecnolog√≠a y con sus pelos. Y de la estrella h√°bil, escurridiza y audaz que lidi√≥ con adversidades externas e internas y supo sortear muchas de las trampas de la fama. Del hombre que transit√≥ varias lunas y unas cuantas vidas. En virtud de una investigaci√≥n minuciosa, una multitud de entrevistas exclusivas a otros artistas, amigos y allegados, y un archivo personal enorme forjado a trav√©s de una relaci√≥n de a√±os que fue un v√≠nculo profesional pero tambi√©n de afecto y complicidad, Marchi pone en juego las m√∫ltiples dimensiones de este hacedor de universos, desbarata algunas falsas creencias y recupera la magia de un personaje a la vez m√≠tico", Precio = 40999, Imagen = "librogus.jpg"},
                new Libro { Id = 22, Titulo = "EL LIBRO DE BILL", Autor = "HIRSCH, ALEX", Anio = 2024, Descripcion = "El demonio que aterrorizo Gravity Falls esta de vuelta desde el mas alla para contar por fin su version de la historia en El libro de Bill, escrito nada menos que por el mismisimo Bill Clave.En estas paginas,Bill comparte sus extraos origenes, su siniestro efecto en la historia de la humanidad,los secretos mas vergonzosos de la familia Pines yla receta para conquistar el mundo (con una practica guia paso a paso).Este caotico y bello tomo ilustrado contiene confusos acertijos,claves indescifrables,paginas perdidas del Diario 3,maneras de engaar la muerte,el significado de la vida y un capitulo completo sobre popotes bobos con formas divertidas.Pero lo mas importante es que El libro de Bill esta muy,muy maldito. Alex Hirsch, el autor bestseller, resucita a este infame villano e invita a los fans a ver el universo Gravity Falls desde la perspectiva de Bill. Muchos creen que este libro es demasiado peligroso para las manos humanas. Pero si no logras resistirte, debes saber esto: una vez que haces un trato con Bill, no es facil retractarte‚Ä¶", Precio = 50900, Imagen = "librobill.jpg"},
                new Libro { Id = 23, Titulo = "La Niebla", Autor = "Stephen King", Anio = 2007, Descripcion = "He aqu√≠ una serie de historias -unas horripilantes en su extravagancia, otras tan terror√≠ficas que disparan el coraz√≥n- que son el producto mejor acabado de una de las m√°s poderosas imaginaciones de nuestro tiempo: En ¬´La niebla¬ª, historia inicial del libro, extensa como una novela, un supermercado se convierte en el √∫ltimo basti√≥n de la humanidad ante la invasi√≥n de la Tierra por parte de un enemigo inimaginable. En los desvanes hay cosas que conviene dejar tranquilas, cosas como ¬´El mono¬ª. La m√°s soberbia conductora del mundo le ofrece a un hombre ¬´El atajo de la se√±ora Todd¬ª, para llegar antes al para√≠so. En fin, todo un abanico de emociones y escalofr√≠os, cuyas flores se abren por la noche. El libro fue llevado al cine en 2007. La cr√≠tica ha dicho... ¬´King tiene verdadero talento: sus cuentos de terror son entretenidos y copias exactas de nuestras m√°s profundas pesadillas.¬ª The New York Times", Precio = 23939, Imagen = "libroniebla.jpeg"},
                new Libro { Id = 24, Titulo = "EL HOBBIT Y LA FILOSOFIA", Autor = "BASSHAM, GREGORY", Anio = 2014, Descripcion = "Una divertida banda de pensadores comparte el entusiasmo de Tolkien por las preguntas filos√≥ficas, en un libro escrito para fan√°ticos de El Se√±or de los anillos. Exploran la metaf√≠sica de El hobbit, sus valores fundamentales y las ideas que proporcionan el contexto moral y conceptual de la historia. Como muchos hobbits, los autores tienen un fundamento de sabidur√≠a y frases sabias que los hombres casi nunca han escuchado o han olvidado hace mucho tiempo.", Precio = 21500, Imagen = "librohobbit.jpg"},
                new Libro { Id = 25, Titulo = "It (Eso)", Autor = "Stephen King", Anio = 2022, Descripcion = "Una de las novelas m√°s ambiciosas de Stephen King, donde ha logrado perfeccionar las claves del g√©nero de terror. El libro que inspir√≥ a la pel√≠cula hom√≥nima. ¬øQui√©n o qu√© mutila y mata a los ni√±os de un peque√±o pueblo norteamericano? ¬øPor qu√© llega c√≠clicamente el horror a Derry en forma de un payaso siniestro que va sembrando la destrucci√≥n a su paso? Esto es lo que se proponen averiguar los protagonistas de esta novela. Tras veintisiete a√±os de tranquilidad y lejan√≠a una antigua promesa infantil les hace volver al lugar en el que vivieron su infancia y juventud como una terrible pesadilla. Regresan a Derry para enfrentarse con su pasado y enterrar definitivamente laamenaza que los amarg√≥ durante su ni√±ez. Saben que pueden morir, pero son conscientes de que no conocer√°n la paz hasta que aquella cosa sea destruida para siempre. KING STEPHEN Stephen King es autor de m√°s de sesenta libros, todos ellos best sellers internacionales. Sus t√≠tulos m√°s recientes son Si te gusta la oscuridad, Holly, Cuento de hadas, Billy Summers , Despu√©s, La sangre manda, El Instituto , Elevaci√≥n, El visitante cuya adaptaci√≥n audiovisual se estren√≥ en MAX en enero de 2020 , La caja de botones de Gwendy con Richard Chizmar , Bellas durmientes con su hijo Owen King , El bazar de los malos sue√±os y la trilog√≠a Bill Hodges Mr. Mercedes, Quien pierde paga y Fin de guardia . La novela 22 11 63 convertida en serie de televisi√≥n en Hulu fue elegida por The New York Times Book Review como una de las diez mejores novelas de 2011 y por Los Angeles Times como la mejor novela de intriga del a√±o. Los libros de la serie La Torre Oscura e It han sido adaptados al cine, junto con parte de sus cl√°sicos, como Misery, El resplandor, Carrie, El juego de Gerald y La zona muerta.", Precio = 59699, Imagen = "libroit.jpg"},
                new Libro { Id = 26, Titulo = " PERONISMO HOY", Autor = "MORENO, GUILLERMO", Anio = 2024, Descripcion= "Porque como ense√±a la verdad justicialista n√∫mero 13, Un gobierno sin doctrina es como un cuerpo sin alma, en este libro Guillermo Moreno repasa los aciertos de la d√©cada ganada y hace un mea culpa de los errores cometidos, en el que expone c√≥mo a ese ciclo virtuoso le sucedi√≥, seg√∫n √©l, una declinaci√≥n producto del desgobierno de Macri, la err√≥nea decisi√≥n en soledad de Cristina por Alberto Fern√°ndez, su gobierno falto de doctrina y rumbo y un Partido Justicialista intrusado por la pol√≠tica eleccionaria y la socialdemocracia. Todo llev√≥ a desorientar al pueblo, que eligi√≥ como Presidente a un libertario que no est√° en condiciones para ejercer el cargo. Ante ese panorama de decadencia sostenida, Moreno convoc√≥ a quienes quisieran colaborar con las propuestas necesarias para una recuperaci√≥n. Por primera vez en a√±os, en el seno del movimiento hubo una discusi√≥n pol√≠tica y doctrinaria sobre la reorganizaci√≥n del movimiento nacional justicialista. Un reencuentro con la doctrina para dar din√°mica a cada una de sus ramas y que de ellas surgieran proyectos como anticipaci√≥n a un futuro gobierno peronista con herramientas para sacar al pa√≠s de la decli-naci√≥n: el Plan de gobierno. Peronismo hoy es la base para poner manos a la obra en pol√≠tica econ√≥mica, pol√≠tica exterior, defensa nacional y concretar proyectos de vocaci√≥n industrializadora que recuperen la memoria industrial de nuestras empresas, la fortaleza de nuestras organizaciones sindicales, los valores del trabajo, la familia y la solidaridad arrasada por a√±os de individualismo neoliberaL ", Precio = 34900, Imagen= "libroperonismo.jpg"},
                new Libro { Id = 27, Titulo = "LOS CABALLEROS DE LA NOCHE", Autor = "BALMACEDA,DANIEL", Anio = 2024, Descripcion = "La aventura del belga Alphonse Kerckhove de Pe√±aranda y el espa√±ol Florentino Mu√±iz es un fascinante relato de ambici√≥n, elegancia y de b√∫squeda de prosperidad a toda costa en la vibrante Buenos Aires de finales del siglo XIX. Juntos, estos dos hombres de mundos diferentes tejieron una trama sin precedentes en la historia y los or√≠genes del hampa en la Argentina. De los primeros experimentos delictivos en Bruselas a la conformaci√≥n de una banda que actuaba de noche y lleg√≥ a robar un cad√°ver de la familia Dorrego para pedir rescate. Son los tiempos de la presidencia de Roca, de la polic√≠a de Marcos Paz, de los palacetes en los que viv√≠an las familias adineradas de la creciente ciudad. Una trama hist√≥rica y policial de un caso que Balmaceda investig√≥ durante a√±os para escribir esta historia que se lee como una novela.", Precio = 34999, Imagen = "librocaballeros.jpg"},
                new Libro { Id = 28, Titulo = "El Diario De Ana Frank", Autor = "Frank, Ana", Anio = 2008, Descripcion = "Ana Frank naci√≥ en Alemania en 1929. A la edad de trece a√±os comenz√≥ a escribir un diario y poco tiempo despu√©s ella y su familia tuvieron que ocultarse para evitar los campos de concentraci√≥n.Era una ni√±a alegre, ingeniosa e inteligente. Delgada, no muy alta, ten√≠a el cabello oscuro como su madre, ojos grises con destellos verdosos, un hoyuelo en el ment√≥n a los que se sumaban dos en las mejillas cuando se re√≠a, como suced√≠a casi permanentemente.Cuando la Gestapo arras√≥ el escondite donde se ocultaba la familia Frank dej√≥ desparramados por el piso, viejos libros, revistas y peri√≥dicos, entre los cuales los fieles amigos de los Frank buscaron y encontraron el Diario de Ana, guard√°ndolo para cuando ella volviera. Solamente se lo entregaron a Otto Frank, el √∫nico sobreviviente de la familia, cuando tuvieron la certeza que la ni√±a no volver√≠a jam√°s.", Precio = 21300, Imagen = "librodiarioana.jpg"},
            };
        }

        // M√©todo para obtener el carrito desde sesi√≥n
        private List<CarritoItem> GetCarrito()
        {
            var data = HttpContext.Session.GetString("carrito");
            if (data != null)
                return JsonSerializer.Deserialize<List<CarritoItem>>(data) ?? new List<CarritoItem>();
            return new List<CarritoItem>();
        }

        // M√©todo para guardar el carrito en sesi√≥n
        private void SaveCarrito(List<CarritoItem> carrito)
        {
            HttpContext.Session.SetString("carrito", JsonSerializer.Serialize(carrito));
        }

        // Agregar libro al carrito
        public IActionResult OnPostAgregarCarrito(int id)
        {
            var libros = ObtenerLibros();
            var libro = libros.FirstOrDefault(l => l.Id == id);
            if (libro == null) return RedirectToPage("/Index");

            var carrito = GetCarrito();

            var existente = carrito.FirstOrDefault(c => c.Id == libro.Id);
            if (existente != null)
            {
                existente.Cantidad++;
            }
            else
            {
                carrito.Add(new CarritoItem
                {
                    Id = libro.Id,
                    Titulo = libro.Titulo,
                    Autor = libro.Autor,
                    Descripcion = libro.Descripcion,
                    Imagen = libro.Imagen,
                    Precio = libro.Precio,
                    Cantidad = 1
                });
            }

            SaveCarrito(carrito);

            TempData["Mensaje"] = $"Se agreg√≥ '{libro.Titulo}' al carrito";
            return RedirectToPage();
        }
    }
}
